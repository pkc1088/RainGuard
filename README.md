# RainGuard
UART 통신을 활용한 자동 건조 시스템

# 1. 프로젝트 소개
- **프로젝트 명**
  - UART 통신을 활용한 자동 건조 시스템 <br/><br/>
- **시연 url**
  - 시연 url <br/><br/>
- **프로젝트 동기**
  - 대형 쇼핑몰에서 젖은 우산을 관리하기 위해 일회용 비닐봉지를 주로 사용
  - 우산을 쇼핑 내내 휴대해야 하며 물기가 마르지 않는다는 단점이 존재
  - 이런 단점을 극복하기 위해 UART 통신을 활용해 중앙 서버에서 우산을 직접 보관
  - 모터를 이용해 우산을 자동 건조시키며 사용자가 퇴실 시 어느 출입구에서든 우산을 회수할 수 있는 시스템을 구현하고자 함<br/><br/>

- **프로젝트 목표**
  - UART 통신으로 중앙 집중화 우산 관리 시스템 구축
  - Mega2560으로 조도 및 습도 센서를 제어해 우산 건조 자동화 구현
  - 버튼 인터럽트로 사용자모드/자동화모드 및 회수 명령을 구현<br/><br/>
 
- **프로젝트 설치 및 실행 방법**
  - 아래 링크에서 Arduino IDE를 다운로드
    - https://www.arduino.cc/
  - 'RainGuard' 폴더의 slave 코드와 master 코드를 두 개의 mega2560 보드에 포팅 후 실행<br/><br/>

# 2. 프로젝트 스펙
- **제작 기간** : 2024.11.18 - 2024.12.16<br/><br/>
- **팀원 및 역할**<br/><br/>
  - 편경찬
    - 버튼 인터럽트 구현
    - 조도/습도 아날로그 값 읽기 구현
    - 마스터측 패스워드 일치 여부 판단 구현
    - slave와 통신을 위한 셋팅 및 통신 규약 설정
    - 사용자 모드와 자동화 모드를 구분해 구현<br/><br/>
  - 조영진
    - LCD 입출력 구현
    - 초음파 센서 구현
    - 슬레이브측 패스워드 송수신 구현<br/><br/>
  - 김민현
    - 모터 핀 셋팅 및 구현<br/><br/>
- **개발 환경**
  - 사용 보드 : Mega2560
  - 사용 언어 : Aduino Programming<br/><br/>
- **리포지토리 구조**
  ```
  ├── RainGuard
  │   ├── Term_master
  │   │   └── Term_master.ino
  │   └── Term_slave
  │       └── Term_slave.ino
  └── 발표자료&제안서
      ├── 7조_어드벤처디자인_발표자료.pdf
      └── 어벤디 프로젝트 제안서.pdf
  ```
<br/>

# 3. 프로젝트 시나리오
  - 고객이 우산을 꽂으면 초음파 센서가 감지
  - 초음파 센서가 우산을 감지하면 고객에게 비밀번호 입력 요구
  - 시리얼 모니터로 비밀번호 입력 기능 구현
  - 고객이 비밀번호를 입력하면 UART 통신으로 비밀번호를 중앙 아두이노에 전달
  - 중앙 아두이노에서 고객이 보관한우산의 습도 측정하고 현재 조도/습도에 따라 모터 작동
  - 조도/습도에 상관없이 버튼 인터럽트로 모터 강제 작동 기능도 존재
  - 고객이 우산 수령 버튼을 클릭해 인터럽트를 발생시키면 중앙에서 현재 우산 습도를 전달
  - 고객은 우산 습도를 보고 우산을 가져갈 것인지 판단
  - 우산 수령을 확정하면 비밀번호 입력하고 비밀번호가 일치하면 우산을 수령함

# 4. 프로젝트 배경지식 및 주요 설계
  - 임계 영역 설정
    - 인터럽트가 시스템 제어 모드의 if문 안에(!user_mode 안) 있을때 발생하면 인터럽트 처리 후 내부에서 또 다시 모터 수를 변경할 수 있으므로
    - 시스템 제어 모드 안은 인터럽트를 비활성화 (noInterrupt()) 시켰다
  - 오버헤드 관리
    - 전역변수 motor_num이 존재하고, 건조 상태가 달라져서 motor_num의 값이 현재 습도에서 제어하는 모터 수와 다를때만 실제 모터 수를 조절하도록해 불필요한 오버헤드를 줄였다
  - 중앙 자동화 모드 / 사용자(관리자) 모드
    - 사용자가 퇴실할때 건조상태를 보고 급속 건조를 요구하면 중앙 관리자가 버튼을 조작해서 빠르게 말릴 수 있다
    - 그 외의 경우 에너지 절약 측면에서 자동 건조 모드를 실행한다
  - 내부 통신 규약 셋팅
    - Serial3.read()로 어떤 값을 읽으면 특정 동작을 수행할지 master와 slave 간 규약을 셋팅 해 쓰레기 값을 읽지 않도록 안정성을 확보함
  - 패스워드 관리
    - slave가 보낸 패스워드는 UART 통신을 통해 master인 중앙 서버에서 관리함으로 고객이 퇴실 시 다른 출입구에서 우산을 요청해도 고객 인증이 가능함

# 5. 프로젝트 확장 가능성 및 리뷰

![Image](https://github.com/user-attachments/assets/69a3b5ca-d195-4421-9b51-f04a44dcbfd9)
  
  - 클라이언트 아두이노 개수를 확장해도 중앙 관리 시스템이기에 안정적으로 운영 가능하다

# 6. 참고자료
[아두이노 간 통신하기 - UART, I2C, SPI](https://kocoafab.cc/tutorial/view/451)
